<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MutationObserver</title>
  </head>
  <body>
    <div id="haha">
      Hello
    </div>
    <input type="text" id="ipt">
  </body>
</html>
<script type="text/javascript">
  let div=document.querySelector('#haha');

  // 创建一个观察者
  let observer=new MutationObserver(function (mutations){
    mutations.forEach(function(mutation) {
      console.log(mutation);
    });
  });
  var config = {
    childList: true,      // 观察节点的新建与删除
    attributes: true,     // 观察属性节点的新建，删除与修改
    characterData: true,  // 如果目标是characterData节点（具体有文本，注释和处理指令节点等），则观察其内容变化
    subtree: true,        // 递归观察所有后代子节点为以上三种类型的节点
    attributeOldValue: true,  // 修改时记录旧值，前提是attributes为true，旧值记录在oldValue中
    characterDataOldValue: true,  // 修改时记录旧值，前提是characterData为true，旧值记录在oldValue中
    attributeFilter: ['class'],    // 筛选器，一个字符数组，只观察指定的属性
  }


  // 传入目标节点和观察选项
  observer.observe(div, config);

  div.classList.add('hello1');

  div.classList.add('hello');

  // 随后,你还可以停止观察
  // observer.disconnect();
</script>
